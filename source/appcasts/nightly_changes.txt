2019-11-16: Refactor killing of tasks to hide monoserver
details

2019-11-16: Eliminate pidIsChild

2019-11-16: Reduce uses of childPid and serverChildPid

2019-11-16: Don't pass fork state around where it isn't
needed by the caller

2019-11-16: Combine forkAndExec with didForkAndExec

2019-11-16: Improve error reporting for fork and exec to
simplify callsite and eventually combine forking with
post-forking calls

2019-11-16: Move fork and exec into job manager

2019-11-16: Refactor fork and exec code to prep for moving
it into the job manager

2019-11-16: Replace finishLaunchingDirectChild with
didForkParent

2019-11-16: Fix a bug where didForkParent didn't call the
completion block when using monoserver and PTYTask
attachToServer: was not defined

2019-11-16: Begin adding legacy job manager

2019-11-16: Start moving session restoration functionality
from PTYTask to iTermMonoServerJobManager

2019-11-16: Simplify iTermTask interface a little to hide
the existence of session restoration

2019-11-16: Break the dependency of TaskNotifier on PTYTask.

2019-11-14: Convert NSAssert to beta asserts sampled at 1%.
NSAssert gets compiled out, so I shouldn't have been using
it.

2019-11-14: Fix string length check

2019-11-14: Fix python argument parser's behavior when space
is left out after -c or -m

2019-11-14: [BetterFontPicker] Don't crash if an image asset
is missing

2019-11-14: Turn the action status bar component into a text
component that handles clicks rather than a button because
its baseline was misaligned and the text color was a bit
dimmer than everything else.

2019-11-14: Add status bar menu component. Try to fix mouse
down handling for status bar components.

2019-11-14: Show action's description in subtitle of open
quickly action

2019-11-14: Fix open quickly action icon

2019-11-14: Don't require a space after the shortcut for an
open quickly command. So /a will now list arrangements, and
/afoo will search for arrangements with query 'foo'.

2019-11-14: Change action shortcut to /:

2019-11-14: Speed up open quickly window animation

2019-11-14: Add actions to open quickly

2019-11-14: Add drag-drop and multiselect capability to
actions tool

2019-11-13: Change how fake middle clicks are generated to
be an OtherMouseDown rather than as LeftMouseDown with
button=2. Tangentially related to issue 8481 because it
makes it report the event properly.

2019-11-13: Do not report left clicks with multiple fingers
touching. This is how apple trackpads reports three finger
clicks. See also issue 4652. Issue 8481

2019-11-13: Prevent a crash when you can't get the position
of the upload/download menu. It crashed because
AXUIElementCopyAttributeValue set temp to NULL and then it
was CFReleased.

2019-11-12: Fix off-center traffic light buttons in native
full screen in minimal theme. Issue 8478

2019-11-11: Set window title label's string/attributedString
before computing its width to determine the text alignment.
Fixes a bug where a short label would be left aligned after
the title changes from a long label. Issue 8476.

2019-11-10: Fix gray bar that appeared when in native full
screen with one tab and no tab bar. Also appears when
changing to minimal theme in native full screen. This
happened because the style mask was not full-size content
view. Issue 8257.

Remove and re-add the tabbar titlebar accessory view when
changing its height from 0 (one tab, hidden, minimal theme)
to 38 (two tabs, visible tabbar, minimal theme) because
otherwise the OS gets confused about how high it should be.

Update the tab bar control's height when updating its style
so that the transition from regular to minimal makes it
grow. Outside full screen this happens as a side-effect of
changing the window style or in -[iTermRootTerminalView
layoutSubviews], but the former doesn't happen for obvious
reasons and the latter because it doesn't consider itself
the owner of the tabbar (it's on loan).

2019-11-10: Don't set documentedEdited for child jobs named
login or iTerm2. Issue 3139

2019-11-09: Improve debug logging for hasNontrivialJob

2019-11-09: Fix failing test

2019-11-09: [python] Bump version to 1.9

2019-11-09: Add support for getting the default profile

2019-11-07: Enable dragging the window by the add-tab
button. Issue 8046

2019-11-07: Put title background and window border in layers
when using metal on 10.14. Issue 8454

2019-11-07: Put a dot in the close button when a job other
than the shell is running. Issue 3139

2019-11-07: Don't let password manager create New Account 10
or higher. Somehow a user got stuck trying larger and larger
account numbers. I don't see how it can happen but this
gives a backstop. Issue 8452

2019-11-07: Update touch bar in full screen to show the
proper tab title. Issue 8447

2019-11-06: [python] Add Session.async_get_contents to docs.

2019-11-06: Replace ascii texture NSCache with a cache of my
own design because NSCache sometimes evicts objects
immediately after adding them for no discernable reason.
Issue 8441

2019-11-05: Add the option to have separate window titles
per tab. Issue 8431

2019-11-05: When the window title is set with OSC 2, set the
window title to that value ignoring title components. Issue
8431

2019-11-05: Fix an off-by-one error that prevented find-next
from navigating to a result on the first line. Issue 8426

2019-11-05: Respect the desired size of custom status bar
component popovers. From mailing list: [iterm2-discuss] A
custom iterm2.util.Size doesn't seem to have any effect when
provided to a popover component.

2019-11-04: Add support for 2-factor suffixes to password
manager

2019-11-04: [BetterFontPicker] Preserve weight when changing
font.

2019-11-03: Add git push back to release_beta

2019-11-03: Close downloads window when installation fails
because of bad zip or bad signature

2019-11-03: Fix Python 3.8 compatibility bug - was catching
too specific of an exception for asyncio.CancelledError

2019-11-03: Add ability to download site-packages separately
from the rest of iterm2env.

2019-10-31: Fix keyboard-interactive and private key
passphrase input requesting, which was improperly done on
the main thread causing a deadlock. Issue 8416

2019-10-30: Bump version

2019-10-30: Pass return code up through run_until_complete
and run_forever. Issue 8440

2019-10-30: The recent commits to add layers introduced a
bug in 10.15. While 10.14 sometimes gives you no layer,
10.15 seems to be much more aggressive. Assigning nil to the
layer breaks things. Looks like we don't lose the
performance bump, so limit the layer fiddling to 10.14.

2019-10-30: Improve variable-size tmux windows.

- Changes to the layout of one tab now cause other tabs'
window sizes to be updated.  - Tweak subviews' sizes to try
to use the available space without changing the number of
cells. However, with two tabs where the first has a bunch of
splits the second might have a huge margin.  - Update
tabSize algorithm for variable size windows.  - Guard
changes by tests for variable-size windows

2019-10-29: Fix DVR when the screen scrolls. My last
optimization was too aggressive. When the whole screen moves
up nothing gets marked dirty but the newly added line.

2019-10-27: Add a few small optimizations to the Metal
renderer

2019-10-27: Track clean lines so DVR can avoid trying to
make a diff frame when it's significantly different. Do
diffs line-by-line using only the 'clean' flag rather than
byte-by-byte comparison to reduce time spent building diff
frames. Saves about 4.5% of mainthread time for the spam.cc
benchmark

2019-10-27: Enable a layer on iTermRootTerminalView when
using Metal. Seems to save about 10% of total time in
CATransaction::commit()

2019-10-27: Revert "Change SolidColorView to use layers on
10.14+"

This reverts commit
2f6c31de442c511b5d42730870ae4fb389927011.

2019-10-27: Change SolidColorView to use layers on 10.14+

2019-10-26: Add fast path for selectedIndexesOnLine when
there are no selections

2019-10-26: Prevent overflow for big OSC or CSI parameter

2019-10-26: Break the 'ever used shell integration' test
into two parts since some people have triggers or scripts
that set the pwd or the prompt mark only. Issue 8390

2019-10-26: Make toolbelt dark in minimal theme + dark
background. Issue 8259

2019-10-26: Fix escaping of commands run with smart
selection action 'run command in window'. Issue 8424

2019-10-26: Add Edit Account Name and Edit User Name to
password manager context menu. Issue 8420

2019-10-26: Add 'requires tmux 2.9 or later' note to tmux
status bar config setting

2019-10-24: Add option to not convert italics to reverse
video in tmux integration.

2019-10-24: Invalidate outstanding working directory polls
when you get CurrentDir=. Issue 8418

2019-10-24: Password manager improvements.

- Add support for user names - ARCify - Remove 10.11 cruft

2019-10-23: Update unicode width tables for Unicode 12.
Issue 6337.

2019-10-23: Convert double-backslash in double quotes to a
single backslash when parsing command lines. Before, it was
left as a double-backslash. Also change how manpage commands
from touchbar are escaped. Issue 8414.

2019-10-22: 3.3.7beta2

2019-10-22: 3.3.7beta2

2019-10-22: Add option to reveal remote prefs setting when
it fails to load. Issue 6826

2019-10-21: Ensure endx is always less than width. Fixes a
fairly common crash in 3.3.6.

2019-10-21: Stop live selection when changing tabs for issue
8350

2019-10-21: Add link to github sponsors to about box

2019-10-20: On 10.15, don't dismember scroll views. Instead,
give PTYTextView a layer and hide it. That seems to fix the
performance issues. See more details in comments in
PTYTextView.m added in this diff. Hopefully solves issue
8405.

2019-10-19: Added CFBundleTypeRole Editor for
public.directory to fix drag and drop (#408)

Fixes #8392 2019-10-19: Make image decoding sandbox more
permissive for Catalina. Issue 8368

2019-10-17: Allow sessions model changes to dynamic profiles
without warnings. Also, when copying a sessions model to a
shared model warn if it's a dynamic profile. Email with
subject line 'iTerm2 v3.3.6 suggestion'

2019-10-17: Ignore mouse down that precedes mouse up during
three-finger drag. Fixes a bug where selection by dragging
three fingers goes bananas. I blame Apple. Issue 8350.

2019-10-17: Fix a bug where option-clicking the zoom button
after exiting full screen doesn't zoom. Issue 8401

2019-10-16: Set pixel size in TTY. Inspired by PR 247

2019-10-15: Disable selection scroll if it begins in the
mutable area while reporting mouse clicks. Issue 8395

2019-10-15: Improve Prompt docs

2019-10-15: [python] Add app_tab_color example

2019-10-15: Unhide standard window buttons when entering
full screen. They are hidden when exiting and going to a
compact appearance. Issue 8381

2019-10-15: Fix the list-sessions command that's used when
sessions are explicitly requested. THe previous command
produced unparsable output. Issue 8388

2019-10-14: Add nix support to Makefile

Sets the derivedDataPath to the current directory so that
Nix has permission to store intermediate build artefacts.
Fixes code signing as well. (#407) 2019-10-12: Disable
quicklook if it's disabled systemwide. Issue 8384.

Discovered by doing this while toggling the setting:
  log stream --level=debug | grep "wrote the key"

2019-10-12: Fix padding of broken pipe message

2019-10-12: Fix a bug where setting the icon title when
showing Profile + Session name caused the profile name to go
away. Issue 8380

2019-10-12: Reverse the order in which the API helper
activates app/window/tab/session because activating a tab
has the side-effect of changing which session is active

2019-10-12: Update tooltip for brighten bold

2019-10-12: Separate 'use custom bold color' from 'brighten
bold colors', which previously were confusingly grouped into
a single setting. The new Brighten feature only affects ANSI
colors 1-8 and does not affect the default color (since it's
not obvious whether lightening or darkening would actually
be appropriate, and the custom bold color covers that case).
Issue 8371

2019-10-12: [python] Add stty example

2019-10-11: Add advanced pref to disable tabbar tooltips.
Issue 8370

2019-10-11: Improve wording of advanced pref for dragging
tabbar in minimal

2019-10-11: Fix an insanity where -tabviewWidth returned the
tabbar width if it was on the left. This happened to work
because it was only called differently depending on its
internal checks. yikes

2019-10-11: Relax limits on left-side tabbar width so that
when you create a new window we can make sure the initial
session has the right number of columns. Issue 8365

2019-10-11: Move selection-related settings from Pointer to
General>Selection. Issue 8364

2019-10-10: Use tag: operator when selecting a tag in the
profile list. Issue 8348

2019-10-10: Improve quoting of username to avoid escaping
spaces. Issue 8360

2019-10-09: Save/restore tags table in profile toolbelt.
Issue 8348

2019-10-09: Fix background color of tags view

2019-10-08: 3.3.7beta1

2019-10-08: Do not send server-controlled values in tmux
integration mode.

CVE-2019-9535

- Use session number everywhere rather than session name -
Do not poll tmux for the set-titles-string, status-left, and
status-right and
  then request the values of the returned format strings.
  Use ${T:} eval instead. These features are now only
  available for tmux 2.9 and later.
- Hex-encode options saved in the tmux server to make them
unexploitable (e.g.,
  hotkeys, window affinities, window origins, etc.). The old
  values are accepted as inputs but will never be produced
  as output.

2019-10-08: Disable hardened runtime in dev builds

2019-10-08: Disable git push

2019-10-08: Add some entitlements to the hardened runtime
for issue 8345

2019-10-08: Add notarization to release_stable

2019-10-07: Close all possible open file descriptors when
starting a coprocess

2019-10-07: Don't send text when selecting from history in
composer

2019-10-07: Another unneeded import

2019-10-07: Another unused header

2019-10-07: Moved PSMTabBarControl import from
iTermPreferences header to its implementation

2019-10-07: Removed unused imports

2019-10-07: Clear composer combobox after sending text.
Issue 8346

2019-10-03: There was a bug that when the profile name
changes the autoName got copied into the autoNameFormat if
there was an icon title. That caused a problem because the
autoNameFormat updates the autoName asynchronously. If you
get to control sequences in the same spin of the runloop,
the first one of which updates the autoNameFormat and the
second one updates the profile, then the second one causes a
profile name change that copies the now-outdated outoName
into the autoNameFormat, overwriting the title change. I
don't think it ever makes sense to copy the autoName to the
autoNameFormat since the autoName is not meant to be
evaluated. I think I probably overlooked this site when
splitting the autoNameFormat out of the autoName. Issue 8319

2019-10-03: Disable working directory poller after getting a
control sequence that informs us of the working directory.
Issue 5878, felixfbecker

2019-10-03: Update Colorpicker.framework

2019-10-03: [colorpicker] Remember the hue and saturation
even when the color is black/white. Issue 8328

2019-10-03: Add more debug logging to url actions for issue
8244

2019-10-02: Added SSKeychain as a dependency to the
iTerm2Shared target, thus allowing `xcodebuild -target
iTerm2 -project iTerm2.xcodeproj` to run from the command
line without a `can't locate file for: -lSSKeychain` error

2019-10-02: Prevent images from disappearing due to scaling

2019-10-02: When installing an .its script with a minimum
version number, there was an off by one bug where it would
look for a runtime *newer* than the one in the setup file.
Came up in issue 8318
