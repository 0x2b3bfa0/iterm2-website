2018-10-21: Make VT100ScreenTest pass on macOS 10.13 because
Travis

2018-10-21: Update travis goldens for updated emoji widths,
minor text rendering changes

2018-10-21: Update 24 bit color golden to not use subpixel
AA

2018-10-21: Don't try to use metal if there are more than 8k
pixels in either dimension. Issue 7090. I'm assuming the
user had a retina display.

2018-10-21: Use black or white with alpha for minimal tab
style outlines instead of full-alpha grayscale. Issue 7249

2018-10-21: Make tab bar show in lion fullscreen as a
titlebar accessory.

2018-10-21: Put a visual effect view behind the tabbar on
Mojave

2018-10-21: Put tab bar in titlebar accessory in lion
fullscreen windows

2018-10-21: Enable titlebar accessory for Mojave. It seems
not to cause autolayout insanity with the toolbelt any more

2018-10-21: If no title components are selected, show Shell
unless window or icon title is set. Prefere window title to
'Shell' and prefer icon title to window title. Issue 7145

2018-10-20: Fix the color of the toolbelt view in dark theme
on Mojave when darkThemeHasBlackTitlebar is off. Issue 7130

2018-10-20: Improve appearance of colored tabs in minimal
theme with normal window

2018-10-20: Fix per pane titles when duplicating a tab.
Issue 7140

2018-10-20: Update tab style colors. This is an improvement
but it's not a complete answer. On Mojave, it should use a
visual effect view. Issue 7137

2018-10-20: Allow prefs window to resize when opening it
directly to profiles when coming from the profiles window.
Issue 7106

2018-10-20: Log a critical error when a saved arrangement
raises an exception while writing to user defaults. Issue
7003.

2018-10-20: Break new tab/window prompt into two for tmux
integration. Issue 7245

2018-10-19: Fix broken tmux 2.2 detection

2018-10-19: Merge branch 'master' of
https://github.com/gnachman/iTerm2

2018-10-19: Make session name a swifty string. Fix cycle
checking for unresolved refs

2018-10-19: Do not use a repeating timer for updating the
title. It fires unnecessarily.

2018-10-19: Move session title builtin function to its own
file

2018-10-18: Add merge all windows. Issue 6756

2018-10-18: Fixed some typos with the GPU Renderer
Unavailability reasoning. (#369)

* Fixed a few typos with Metal unavailability reasons.

By Kamran Mackey <kamranm1200@gmail.com>

2018-10-18: Detect cycles in badge swifty strings

2018-10-18: Make it possible to subscribe to profile
changes. Expose the evaluated badge text in a variable. Add
the badgetitle example.

2018-10-17: [python] Bump version

2018-10-17: [python, api] Add APIs for setting broadcast
domains

2018-10-17: Add iTermAdjustFontSizeHelper files

2018-10-16: Add a toggle to make font size changes by cmd-+
and cmd-- adjust the profile. Move the font tweaking code to
its own class. Attach the menu items to the first responder,
not the app delegate, since they shouldn't be available when
there is no window. Issue 7222

2018-10-16: fix: Free environment if tempPath is nil

Identified using the Xcode analysis tools

2018-10-16: fix: Use __bridge_transfer to move ownership to
ARC

2018-10-16: fix: Use autorelease to ensure objects are freed

2018-10-16: Add an assertion to ensure CGContext is not
leaking.

2018-10-16: Reparent NSScroller to improve drawing
performance on Mojave

2018-10-16: Change how LANG is computed. Try
language+country+encoding, then language+country, then
language. Use same algorithm regardless of OS version.
Ignore everything after the first - in the language since
locales do not look like zh-Hans_CN.UTF-8, but do look like
zh_CN.UTF-8

2018-10-16: Hide window shadow in mojave when there is a
transparent session. Thanks apple

2018-10-16: Improve peformance when blinking text is enabled
and scrollback history is enormous. Fetching the lines was
the bottleneck. This avoids walking the whole block array
for each line.

2018-10-16: Only use the nonascii antialias flag when
nonascii font is enabled; otherwise it defaults to NO. Issue
7187

2018-10-16: Add ITAssertWithMessage and use it in
iTermCharacterSource

2018-10-16: Seems like sessionDidBecomeActive: can be called
without a preceding call to sessionDidResignActive:. Or
maybe didBecome gets called twice? Who knows.

2018-10-16: Fix a bunch of bugs in the IME. First, it
crashed if the marked text had a double width character
starting at the end of a line. The colors were wrong. The
cursor was to narrow. It drew garbage on the last lines when
the marked text caused the screen contents to scroll up.

2018-10-16: Add some sanity checks to track down a crash
where a context is nil when drawing ascii characters for the
metal renderer

2018-10-16: Fix a crash where
setSilentlyIgnoreErrors:fromCommand: was called with a nil
command

2018-10-16: Don't use NSLocale.currentLocale on macOS 10.14
because it always returns a langauge that has a localization
for the app. Use first available preferred locale instead

2018-10-16: Activate iterm2 when opening the profiles window
(for when you're using a floating hotkey window and another
app is active)

2018-10-16: Make the close session confirmation into a sheet

2018-10-16: Make app active before opening prefs panel. If
you're in a floating hotkey window this fixes a bug where it
would open under the currently active app (since iTerm2 is
not activated when you open a floating hotkey window)

2018-10-16: Use normal window background color on Mojave
unless the window is transparent

2018-10-16: [metal] Don't draw underline past right boundary
of cell. This requires passing the cell size to the fragment
shader. It previously received the glyph size, but it was
incorrectly named cellSize. Issue 7093.

2018-10-16: Make shadow update frequency configurable and
bump it to 15 fps

2018-10-16: Remove test binary

2018-10-16: Update tabbar text and background colors for
Mojave. Issue 7155

2018-10-16: set version to 3.3.x

2018-10-16: Fix minimum signature size

2018-10-16: Bring back support for thin strokes on 10.14

2018-10-16: Fix fake bold support in GPU renderer. It was
drawing the background over the glyph for the second pass.

2018-10-16: Bring back the call to
CGContextSetShouldSmoothFonts in the traditional renderer.
Interestingly this affects stroke thickness.

2018-10-16: Fix a leak of CGContextREf's in the character
source. It allocated them in init and in
initializeStateIfNeededWithFont but only dealloced the ones
in init.

2018-10-16: Always use font smoothing on 10.13 and earlier.
This fixes a bug where subpixel AA was broken in 10.13 and
earlier.

2018-10-16: Don't draw indicators when measuring them
because there's no graphics context and that causes a
warning

2018-10-16: Update goldens. Goodbye subpixel antialiasing.
Fix a few other tests: change how swizzling user defaults
works for the new caching advanced settings, and on 10.14
skin tone modifiers combine with the letter g for some
reason.

2018-10-16: Add usage descriptions for everything I can
find. Fixes issues like 7132

2018-10-16: Use the right frame (ignoring a hidden menu bar)
for edge-spanning windows. Issue 7149

2018-10-16: Add a preference to turn on subpixel AA on
Mojave. When enabled, thin strokes can be changed.

2018-10-16: Disable thin strokes UI in Mojave when subpixel
AA is off

2018-10-16: Reduce duplicated code

2018-10-16: Enable font smoothing on Mojave only if subpixel
AA is enabled globallhy

2018-10-16: For some insane reason the way you get thin
strokes in 10.14 is the opposite of 10.13. Issue 7142

2018-10-16: Move useVirtualKeyCodesForDetectingDigits from
advanced pref to prefs>keys

2018-10-16: Rename useVirtualKeyCodesForDetectingDigits
advanced pref

2018-10-13: [python] add jsonpretty exmaple

2018-10-13: [python] Bump version

2018-10-13: [python] Fix failing get-buffer test. Fix
spelling of set-preset-initialized test. Add
monitor-variable test.

2018-10-13: [python] Fix an off by one error

2018-10-13: [python] Refresh App when you do async_get_app
and it already exists since the caller would expect an
up-to-date object if it were brand new

2018-10-12: [python] Fix unsubscribing from variable change
notifications. Add variable monitoring to it2api.

2018-10-12: Fix a bug where variable notifications didn't
have subscription dictionaries created if the first notif
requested was for a variable

2018-10-12: [python] Fix variables submodule for changes in
how messages are dispatched from the connection module. Use
an asyncio queue to greatly simplify it.

2018-10-12: Add SystemAppearance.bundle to image_decoder's
sandbox for inscrutable reasons. Nothing personal in there.
Issue 7193.

2018-10-11: Fix the missing lion fullscreen titlebar for
compact windows

2018-10-11: Don't show window number infull screen

2018-10-11: Prevent a crash when the tab doesn't have a
session. Not sure how that happened

2018-10-11: Jiggle the prefs window size after animating it
to try to get the inner tab bar to draw correctly

2018-10-09: Set LC_TERMINAL and LC_TERMINAL_VERSION. See
issue 7154 for some apologia

2018-10-09: Various improvements to session icons: show them
in the window title in minimal+compact. Respond immediately
to changes in the profile. Hide the image well in prefs when
custom is not selected.

2018-10-08: [python] Bump version

2018-10-08: [api, python] Add support for getting the
selection. Change how screen contents are fetched to be very
general. Deprecate some of the old ways of getting screen
contents. Add support for opening popovers from status bar
components. Add support for an on-click handler for status
bar components. Add lots of handy  methods to the util
functions.

2018-10-08: [python] Improve error handling for unrecognized
notifs

2018-10-08: [python] Fix a bug in connection.py where two
websocket messages in quick sucession could cause the future
to become None because python's scope rules are nutty.

2018-10-07: Fix a bug where zoom on selection would append a
hard newline after the last line

2018-10-07: Remove unnecessary logging

2018-10-07: [python] Bump version

2018-10-07: [python] Add zoom on screen example

2018-10-07: [python, api] Export an interface to get the
number of lines of history, overflow, and current visible
line

2018-10-07: If an arrangement doesn't have a profile, use
the default profile. Shouldn't happen but it did, and this
at least breaks you out of the can't-launch loop

2018-10-07: [python] Add assertion to stop early if a
list-sessions response is missing a session ID

2018-10-07: [python] Add selection module

2018-10-07: [python] Fix up mainmenu module docs

2018-10-07: [python] Fix up mainmenu, which was broken after
a refactoring

2018-10-07: [python, api] Add interface to get number of
lines on screen, history, and overflow

2018-10-07: [python, api] Add support for getting and
setting the selection.

2018-10-07: [python] Fix the REPL. Simplify the dispatch
loop code.

2018-10-06: If a keypress event is received that has no
device-specific modifiers, assume it's Synergy being silly
and add a left modifier. There's an advanced pref to control
this. Issue 7048.

2018-10-06: Add text fields to edit text spacing. Issue 7109

2018-10-06: Fix bad printf format

2018-10-06: Fix vertical alignment of status bar contents.
Text is now vertically aligned so the center of caps is in
the center of the container. Status bar icons are centered
within their container. The status bar is now 21 points
everywhere. When in the pane titlebar the horizontal divider
under it is visible.

2018-10-06: Add logging for issue 7053

2018-10-04: Fix typo in advanced settings (#368)


2018-10-02: Improve background color of tmux integration
windows on 10.14. The flexible view used to draw under all
the session views and they would punch a hole through the
window. In 10.14, compositing works, so they now overlap and
appear to have a less opaque background color. Issue 7147

2018-10-02: [python] Add docs for the new focus module

2018-10-02: Really draw two frames before showing metal
view. Seems to either fix or mostly prevent the issue where
the metal view is transparent

2018-10-02: Pool bitmap contexts. It was extremely slow to
create and destroy them all the time.

2018-10-02: Update release_stable to get improvements made
to release_beta

2018-10-02: [Python] Add focus monitor

2018-10-02: Add a currently off by default advanced setting
to invalidate the window shadow once a second for
transparent windows. It's ungodly slow.

2018-10-02: [Python] Hold on to tasks until they're done. I
retract my previous comment about understanding asyncio.

2018-10-02: [Python] Greatly simplify how we use asyncio and
websockets.

I think I finally understand how asyncio is supposed to
work! This design is a million times better, and fixes a
deadlock that the previous design had. Ahhhh

2018-10-01: Fix support for subpixel AA on Mojave. This
reverts to the 10.13 code paths when
CGFontRenderingFontSmoothingDisabled is set to NO regardless
of OS version.

2018-10-01: [python] Bump version

2018-10-01: [python] Change how run_forever works. await the
dispatch_forever task so that exceptions will be handled
properly.

2018-10-01: [python] Add mrutabs example

2018-10-01: [python] Fix basic daemon template

2018-09-30: Tweak Mojave GPU font weight darker. Issue 7128

2018-09-30: Window window shortcut label less prominent

2018-09-30: Add the mysterious NSAppleEventsUsageDescription
to the info.plist files. Here's another prime example of
Apple doing a garbage job. They added this thing in Mojave
beta 7 and some people discovered it by accident in Xcode
and blogged about it. Other than that it's impossible to
find any information about it. It's almost like they don't
care about the mac any more. Issue 7119.

2018-09-30: Fix resizing split panes in Mojave. It had a bug
where the "after" frame went the wrong direction. Mojave
handled this incorrectness in a different and more visible
manner. Issue 7121.

2018-09-30: Improve metal enablement behavior because of
strange behavior that surfaced in a comment in issue 6902.

Do not keep trying to render a metal frame after a session
has exited. This prevents infinitely retrying to draw
posthumously. This was done in both
renderTwoMetalFramesAndShowMetalView and
drawFrameAndRemoveTemporarilyDisablementOfMetalForToken.

Remove sessionViewHideMetalViewUntilNextFrame, which was
unnecessary because the caller already gets a temporary
disablement token and releases it after a spin.

When drawFrameAndRemoveTemporarilyDisablementOfMetalForToken
eventually finishes its async draw, change how it shows the
metal view: instead of just turning on the wrapper, turning
of PTYTextView's darwing, and setting the metal view's alpha
to 1, also cause it to redraw the metal view immediately.

2018-09-29: Fix up examples to use the new run functions

2018-09-29: [python] Update status bar example

2018-09-29: Fix a bug where the hotkey window would always
be opened when opening a file with iTerm2. The problem was
that a nil term would return a profileHotkey when passed to
profileHotKeyForWindowController. Issue 7087.

2018-09-29: Fix a bug where tab icons weren't updated right
away

2018-09-29: Add macvim to the list of vims

2018-09-29: Don't show the monitor emoji when there is no
title. It is easily confused with the tab icon. Issue 7103

2018-09-29: Support notification triggers created in 3.2.1

2018-09-29: Force textview to redraw when transparency is
toggled. I don't know why telling its superview to draw did
not do the job, except that AppKit is weird. Issue 7114

2018-09-29: Refactor postprocessing into its own method and
have it write into a buffer it owns instead of the bitmap
data, which might not be safe to write to.

2018-09-29: Use an enum instead of passing strings around in
gpuRendererAvailability to try to fix a crash (which I think
is not actually this, but it's a better design anyway)

2018-09-29: Add some assertions to the 10.14 character
bitmap postprocessing to detect buffer overruns before they
happen

2018-09-29: Use grid width, not visible width, for
determining how much space exists for the IME's marked text.
This should fix an assertion.

2018-09-29: Move checkForOverrun around to get a better fix
on what's happening

2018-09-29: Fix leak of texture pages

2018-09-29: Fix a bug where a new texture was created every
time a nonascii glyph was shown because the glyph size was
being compared to the cell size. :(

2018-09-27: Make it possible to specify a custom tab icon

2018-09-27: Remove tab icon button from prefs>appearance

2018-09-27: Only draw the area behind the legacy scroller if
scroll bars are not hidden. Issue 7072

2018-09-27: Add a drop shadow to the app icon

2018-09-27: Remove an extra word

2018-09-27: Draw under legacy scrollers on 10.14 when metal
is off. Issue 7101

2018-09-27: Change how text is drawn to look better on
Mojave.

Mojave changes stroke thickness depending on color.
Generally, black is thick and white is thin. The actual
thickness is a function of the red and green channels of the
text color. It is constant for values less than 50%. That
is, r=0.4, g=.4 produces the same stroke as r=0, g=0. Above
50% the stroke thickness changes; it's hard to quantify
stroke thickness, so let's talk about alpha instead. I
believe the difference only affects antialiasing (at least
at small point sizes, which is all that really matters to
us). Alpha values change nonlinearly as the green value or
red value of the text color increases. The rate of changes
depends on the pixel. Some pixels hardly change at all
between black and white; others change from clear to opaque.
All this is described in more detail at:

https://gitlab.com/gnachman/iterm2/wikis/macOS-Mojave-Regression-Challenge

This commit does not attempt to tackle the regression
problem; it simply aims to stem the bleeding. We now render
each non-Emoji character four times: in black, red, green,
and yellow. The alpha value of each rendering is packed into
the red, green, blue, and alpha channels of the texture. The
fragment shader selects one of these channels (and exactly
one) to use for its alpha value. The fragment shader chooses
the text color's rgb values for the rgb channels. This
works! It is perfect for pure white, black, red, green, and
yellow. It is also perfect for all values that are <50% red
and < 50% green. Midtones exhibit noticeable differences.
For reasons I do not comprehend light values look pretty
close, too.

Issue 7032

2018-09-24: Change confirm quit to confirm even when there
are no terminal windows. Issue 7051

2018-09-24: Log all window become/resign key status to debug
issue 7057

2018-09-24: [python] Move screen streamer to its own class.
Fix up docs.

2018-09-23: [python] Bump version

2018-09-23: [python] Move ScreenStreamer into its own
submodule

2018-09-23: [api] Fix failing tests in test_it2api.sh

2018-09-23: [api] Improve how current directory is returned.
Fix a bug where the compmletion handler for the activate api
was called twice.

2018-09-23: [python] Remove uses of deprecated dispatch
functions. Remove deprecated dispatch functions from
Connection

2018-09-23: [python] Add color preset commands to it2api

2018-09-23: [python] Update docs

2018-09-23: [api] Update scripting templates for the new
regime

2018-09-23: [python] Cancel the dispatch_forever task to
avoid a noisy exception when a script terminates

2018-09-23: [python] Remove async_gather. Begin updating
code to use run_until_complete and run_forever.

2018-09-23: [python] Simplify how messages are dispatched
and how programs are run. Use run_until_complete or
run_forever. Dispatching happens in an infinite async loop
now.

2018-09-23: Remove bogus reference in prefs xib

2018-09-23: [status bar] Remove bogus draw calls

2018-09-23: Update docs to add variables and example of
changing color preset when theme changes

2018-09-23: [python] Fix up variable monitoring:

Move variable scope enum to variables submodule.

Allow async_recv_message to be cancelled without breaking
message dispatching forever.

Fix subscribing to app scope variable changes.

Add docs to VariableMonitor.

2018-09-22: [python, api] Add color presets to API.

Refactor Color into its own submodule.

Add gather to connection. Change how waiting on the
websocket works to support the case where two receivers
exist and the first one finishes before the second one.
Before, the second one would never await the websocket
leading to deadlock.

2018-09-22: Add advanced pref that excludes certain
characters from belonging to a URL. Issue 4842

2018-09-21: Move where the window background color is set to
after its last assignment to fix breakage of the dark theme
on 10.12. Issue 7068

2018-09-21: Fix dark theme on 10.12 and 10.13. it_tabStyle
was confused because the appearance was light prior to its
being set so it rewrote the theme to light. This preserves
the preexisting bug with the toolbelt when there's a dark
tab color and no tab bar, which is too complex to fix for
3.2.1. Issue 7054

2018-09-19: Improve text rendering on Mojave + non retina

2018-09-19: Make traditional fullscreen window
miniaturizable on 10.13 and up. The 10.12 behavior, based on
a suggestion in #4402 doesn't make much sense to me but I'm
going to leave it alone since I don't have time to
investigate it now.

2018-09-19: [python] Expose theme through variable. Add
python binding for it.

2018-09-18: Allow hotkey windows to align to the top of the
screen when the menu bar is hidden, as when over a lion
fullscreen window. Issue 7044

2018-09-18: Commit appcast to website after each nightly
build. Tag nightly builds and push tags.

2018-09-17: Clarify how Config Quit pref works. Issue 7051

2018-09-17: [statusbar] Tweak git status bar icon

2018-09-17: [statusbar] make it possible to bound the width
of various components that annoyingly change size all the
time: pwd, git, and jobs

2018-09-17: Update app icon for 3.3

Lose the titlebar which violated the hig. Add the outline
back so it's visible against all color docks.

2018-09-17: Fix the app name in the about box title (omg)

2018-09-17: Add lots of checks and consts to try to find the
cause of buffer overruns

2018-09-17: Invalidate process cache after attaching to a
running process. Fixes a bug where tab titles didn't have a
job name after window restoration

2018-09-17: Make tab bar height configurable by advanced
pref when compact and minimal

2018-09-17: Change default background color and outline
color prominence for minimal style so there's a subtle
background color difference and to make the line less
prominent

2018-09-17: Use a smaller font for the window number label
when not in the minimal theme

2018-09-16: [python] Change keycode pattern properties to
have setters

2018-09-16: Fix typo

2018-09-16: Add an experimental setting, on by default in
betas. When you split a divorced session, the new session
will also be divorced.

2018-09-16: Do not draw window number in full screen. It
overlaps the tab bar

2018-09-16: Fix switching themes on 10.13

2018-09-16: If there is only one tab and it has a dark tab
color then that causes a dark appearance on the window. This
caused problems for the toolbelt which did not update its
colors properly, since the theme (as returned by
it_TabStyle: would be light. It now returns dark if the
window background would also be dark. This change should not
affect Mojave

2018-09-16: Dont reloadData on ProfileListView when the
appearance changes because it broke edit session info
because it messed with the hidden profilelistview it was
tied to. Just update the profile list view in the toolbelt
since that's the only one that's affected by a theme change
on 10.13. Things should take care of themselves on 10.14

2018-09-16: Fix always-visible scrollbars in toolbelt with
dark theme on 10.13. The scrollview's white background
causes them to be invisible'

2018-09-16: Move "use bright colors for bold" in text prefs
to be a checkbox next to the "bold" color in color prefs. It
has been screwed up since I took over iTerm. The actual
semantics are that it enables the bold color you chose, as
well as modifying bold "normal" ANSI colors to be the bright
version. The second effect is not very important compared to
the first, which has caused mass confusion. This commit
makes the main purpose of the preference clear. Issue 7036.

2018-09-16: [metal] Use the same baseline offset as the
legacy renderer. This becomes visible when the nonascii font
has a different baseline offset than the primary font. The
legacy renderer always uses the primary font's baseline
offset.

2018-09-15: Fix failing unit tests

2018-09-15: Remove iTermVariables's delegate interface.
Change all existing users to use iTermVariableReference
instead which is a much cleaner interface.

This commit also fixes miscellaneous bugs like the width of
function call components.

2018-09-15: Incomplete implementation of variable references

2018-09-14: [status bar] Remove the status bar view when the
status bar is disabled

2018-09-14: Fix incorrectly drawn background color. Fix left
margin when status bar on bottom. Fix vertical offset when
status bar on bottom. Issue 6957

2018-09-13: [python docs] add mousemode

2018-09-13: [python] Bump version

2018-09-13: Fix up minimal and compact windows with tab
colors

2018-09-12: [variables] Add support for references, which is
a canonical way of getting notified when a variable changes.
For example, if you have a reference to
session.tab.currentSession.name, it could change because the
tab the session belongs to changes, because the tab's
current session changes, or because the name of the current
session changes. In the old way of comparing path strings
you don't get to find out about changes like these because a
dumb comparison can't resolve indirect references correctly.

2018-09-12: [status bar] Fix autoresizing masks on setup ui

2018-09-12: Fix build

2018-09-12: [status bar] Update icons

2018-09-12: [status bar] Fix a bug where text status bar
components' views did not get resized

2018-09-12: [python, api] Enable monitoring variables in
python. Expose mouse mode as a variable.

2018-09-10: [python] Bump version

2018-09-10: Add support for python 3.7 to copy_api.sh

2018-09-10: Fix a bug where the status bar would be reloaded
because of missing default values in the layout dictionary

2018-09-10: [python] Fix imports

2018-09-10: [python docs] Fix indentation

2018-09-10: Stop trying to be clever about the background
color of the find view. It looks way better when you're not
clever

2018-09-09: If the user sets a title override in prefs,
respect it even if it is empty. This is kind of a hack--we
just replace their value with a space.

2018-09-09: Enable saving a custom  window title in
preferences

2018-09-09: Do not reset bell when title changes. It is too
aggressive, since that could be a job name change.

2018-09-09: Put stoplight buttons in the hotbox (that
appears when you mouse over them) for compact windows with
left-side tabs when the tab bar is not visible.

2018-09-09: Show the window title when there is one tab and
prefs dictate hiding the tab bar and the tab bar is on top.
Also, show a window number in minimal+compact+top or left
tabs.

Alaso, ARCify iTermRootTerminalView.

2018-09-09: [Mojave] Precompute exponent for alpha channel
in metal text vertex shader for faster fragment shading

2018-09-09: Remove an assertion. Looks like you can get
sessionDidResignActive: when already suspended. I guess this
is if you fast user switch to a third user while already
switched away from the user the iTerm2 session is running
under.

2018-09-09: Limit depth that deepestForegroundJob will
search to. Despite cycle detection I saw a crash that went
hundreds of levels deep.

2018-09-09: Add subclasses to iTermData to see which one is
responsible for buffer overruns

2018-09-09: Remove sanity checks from LineBlock since there
haven't been any relevant crashes on 3.2.1beta3 yet

2018-09-09: Run iTermWarning alerts as sheet modals when
possible. Issue 7023

2018-09-09: Prevent a hotkey window from auto-hiding while a
sheet is being presented

2018-09-09: Don't let move to adjacent pane move to a pane
that only shares one point with the one you're moving from.
Issue 6025

2018-09-09: [api] Add an advanced pref to set the python
runtime URL

2018-09-09: [api] Update the banner for the new way of using
Connection

2018-09-09: [api] Assert that handlers are never called more
than once

2018-09-09: [api] Fix a bug in getting window frame called
the completion handler twice because of a missing break

2018-09-09: [api] bump version

2018-09-09: [ColorPicker] Rebuild framework

2018-09-09: [ColorPicker] Fix a crash when dragging a
CPKColorWell

2018-09-09: Cherry-pick underlined text color fix from
release_3.2.

2018-09-09: [metal, mojave] Improve how text is recolored on
Mojave. The system doesn't seem to simply multiply the alph
channel by the color. It's some nonlinear function that I
haven't quite figured out, but this is close.

2018-09-08: [python] Fix how properties are used to be
compatible with Python 3.7

2018-09-08: Move icon settings to profile. Also fix a few
retain cycles in profile general prefs.

2018-09-08: Add an option to show an icon in the tab bar. We
could be cleverer about this by analyzing screen contents,
but I'm not optimistic about that approach paying off, so
let's see how this does (this algorithm simply looks at the
deepest foreground job's command name). Icons come from
hyper-tab-icons-plus, which is MIT licensed.

2018-09-07: [api] Ensure pip3 is run from a spaceless
folder. It was failing when creating a full-environment
script with dependencies.

2018-09-07: [scripting] Fix hang after importing a script on
Mojave

2018-09-07: [status bar] Change how the git statusbar
component works. Now one shell script is launched and it
takes pathanmes on stdin. It outputs blocks of key-value
pairs giving attributes of that path's git state. If it gets
stuck the process is killed.

There is still some work to do: if you're in a slow network
path then it will always get stuck. We should recognize
poisonous directories and stop asking.

2018-09-06: Add an advanced pref to exclude hotkey windows
from cycling

2018-09-06: Don't go to user defaults every time an advanced
setting is read. User defaults is pretty slow. Intead, each
has an associated static NSObject that stores its (perhaps
boxed) value.

This commit also make section names into macros, which was
an ugly little shortcut I have never liked.

2018-09-06: When you right click in an existing selection
and it's not very long save it so that if it changes out
from under the selection we respect what you originally
clicked on. Issue 5471

2018-09-06: Fix a bug where _framesInFlight would be too
high if we failed to get a destination texture or render
pass descriptor. The result was infinitely fast trying to
draw and immediately aborting because it thought there were
too many frames in flight. Issue 7013

2018-09-06: Clean up a comment

2018-09-06: Update process cache when job PID changes for a
session or soft alternate screen mode changes. The former
fixes a bug where the status bar would show an empty job
name after restoring a session

2018-09-06: Tweak position of user icon

2018-09-06: [status bar] Improve look of git component

2018-09-06: Tweak git statusbar component icon

2018-09-06: Change git icon

2018-09-05: [status bar] Make font configurable

2018-09-05: [status bar] Make default text color
configurable. Use same key for text color across all
components.

2018-09-05: [status bar] Allow user to set the background
color of the status bar. Clean up how background colors are
drawn and make all components share the same knob for
background color

2018-09-03: [status bar] Make separator color configurable

2018-09-03: [status bar] Disable configure button after
removing an item because NSCollectionView does not tell you
the item was deselected when you remove it (ffs)

2018-09-03: Convert an NSLog to DLog

2018-09-03: [status bar] Allow backspace to remove a status
bar item in the setup destination collection view. Add a
poof animation when removing an item

2018-09-03: Fix a bad cherrypick

2018-09-03: Remove duplicate definitions from bad cherrypick

2018-09-03: Fix cellSize/glyphSize mixup in box drawing
characters (issue 6909). Also fix the background/foreground
color, which was somehow still broken on Mojave

2018-09-03: Add setting to control fallback LC_CTYPE when
your language+country aren't recognized

2018-09-03: Change project demployment target to 10.12. Not
sure if this will do anything since all the targets were
10.12 already

2018-09-03: Fix ProfileListView colors on 10.13. Should not
affect 10.14. Issue 6983

2018-09-03: Get rid of the prompt to update build settings.
It wants to screw with my signing settings to make them bad.

2018-09-03: Disable header maps

2018-09-03: Add script to notarize builds

2018-09-03: Drop suport for Growl. Revert this if there's a
decent answer to
https://groups.google.com/forum/?fromgroups#!topic/growldiscuss/Y0q07B8dkfQ

2018-09-03: Add a polyfill for NSImageView.contentTintColor

2018-09-03: Remove some unused variables due to the last
change

2018-09-03: [statusbar] Improve drawing of sparklines to
look more minimal, draw correctly when the size of the
region is more than 60 points, and generally look better.

2018-09-03: [status bar] Try hard to set user name and
hostname when not using shell integration.

* Set username and hostname variables when shell integration
  is not in use when a session is initialized.
* Fix a bug where they were nilled out if there was no
  currentHost.
* Refactor localhost name guessing into its own class.  *
Define a new global variable holding localhost's name.  *
Disable git polling when hostname is not localhost.

2018-09-03: Improve readability of completion blocks in
PTYSession

2018-09-03: [status bar] Change sparklines to use status bar
text colors for a more minimal look

2018-09-03: Poll for working directory when the user presses
a key and then a linefeed is received while not in alternate
screen mode, and shell integraiton was not used in the
session

2018-09-03: Add status bar icons

2018-09-02: [status bar] Tint status bar icons with text
color

2018-09-02: [status bar] Fix up minimal theme colors for all
existing components. Update icons sketch file.

2018-09-02: [status bar] Update icons and vertical alignment

2018-09-02: [status bar] Add support for icons.

2018-09-01: Inset status bar dividers a bit

2018-09-01: [statusbar] Make the text color of graphic
components, such as utilization meters, configurable

2018-09-01: Hide the title while an announcement is visible.
Issue 6981

2018-09-01: Increase side insets of stoplight buttons in
minimal mode. Issue 4080

2018-09-01: Fix typo
